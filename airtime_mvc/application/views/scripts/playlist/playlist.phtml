<a href="#" class="close-round" id="lib_pl_close"></a>
<div class="btn-toolbar spl-no-top-margin clearfix">
	<div class="btn-group pull-left">
        <button id="spl_new" class="btn dropdown-toggle" data-toggle="dropdown" aria-disabled="false">
            <?php echo _("New")?> <span class="caret"></span>
        </button>
        <ul class="dropdown-menu">
            <li id='lib-new-pl-static'><a href="#"><?php echo _("New Static Playlist") ?></a></li>
            <li id='lib-new-pl-dynamic'><a href="#"><?php echo _("New Dynamic Playlist") ?></a></li>
        </ul>
    </div>
    <?php if (isset($this->obj)):?>
	<div class='btn-group pull-right'>
        <button class="btn btn-inverse" title='<?php echo _("Save playlist") ?>' type="button" id="spl_save"><?php echo _("Save") ?></button>
    </div>
    <div class='btn-group pull-right'>
        <button id="spl_delete" class="btn" role="button" aria-disabled="false"><?php echo _("Delete") ?></button>
    </div>
	    <?php if ($this->obj->hasContent()):?>
	    <div class='btn-group pull-right'>
	        <button class="btn" title='<?php echo _("Empty playlist content") ?>' type="button" id="spl_clear"><?php echo _("Clear") ?></button>
	    </div>
	    <div class='btn-group pull-right'>
	        <button class="btn" title='<?php echo _("Shuffle playlist") ?>' type="button" id="spl_shuffle"><?php echo _("Shuffle") ?></button>
	    </div>
	    <div class='btn-group pull-right'>
	        <button class="btn" title='<?php echo _("Generate") ?>' type="button" id="spl_generate"><?php echo _("Generate") ?></button>
	    </div>
	    <?php endif; ?>
    <?php endif; ?>
</div>

<?php if (isset($this->obj)):?>
	<input id="playlist_id" type="hidden" value="<?php echo $this->obj->getId(); ?>"></input>
	<input id="playlist_lastmod" type="hidden" value="<?php echo $this->obj->getLastModifiedEpoch(); ?>"></input>
	
	<fieldset class="toggle">
		<legend style="cursor: pointer;">
			<span class="ui-icon ui-icon-triangle-2-n-s"></span>
			<?php echo _("Options") ?>
		</legend>
		<?php echo $this->obj->getRules(); ?>
		<div class='btn-group pull-right'>
	        <button id="spl_rules_save" class="btn" role="button" aria-disabled="false"><?php echo _("Save") ?></button>
	    </div>
	</fieldset>
	
	<div class="playlist_title">
	    <h3 id="playlist_name">
	        <a id="playlist_name_display" contenteditable="true">
	        <?php echo $this->escape($this->obj->getName()); ?>
	        </a>
	    </h3>
	    <h4 id="playlist_length"><?php echo $this->obj->getLength(); ?></h4>
	</div>
	<div id='sp-success' class='success' style='display:none'></div>
	
	<fieldset class="toggle closed" id="fieldset-metadate_change">
	    <legend style="cursor: pointer;">
	        <span class="ui-icon ui-icon-triangle-2-n-s"></span>
	        <?php echo _("View / edit description"); ?>
	    </legend>
	    <dl class="zend_form">
	        <dt>
	            <label for="description">
	                <?php echo _("Description"); ?>
	            </label>
	        </dt>
	        <dd>
	            <textarea cols="80" rows="24" id="playlist_description" name="description">
	            <?php echo $this->escape($this->obj->getDescription()); ?>
	            </textarea>
	        </dd>
	    </dl>
	</fieldset>
	
	<?php if($this->obj->hasContent()):?>
	<div style="clear:both; float:none; width:100%;">
		<ul id="spl_sortable">
		<?php  $this->contents = $this->obj->getContent(); 
			echo $this->render('playlist/update.phtml'); 
		?>
		</ul>
	</div>
	<?php endif; ?>
<?php endif; ?>